# Support for codecov. (Simplified travis.yml file)

sudo: false
language: cpp
script:
  - export CC="gcc-4.8" CXX="g++-4.8"
  - mkdir -p Build+Debug
  - cd Build+Debug
  - cmake -DLIBOFP_ENABLE_CODE_COVERAGE=true -DLIBOFP_ENABLE_MEMCHECK_TESTS=false ..
  - ctest -D Experimental

os:
  - linux

addons:
  apt:
    sources:
      - kalakris-cmake
      - ubuntu-toolchain-r-test
    packages:
      - cmake
      - gcc-4.8
      - g++-4.8
      - libpcap-dev

# We must use gcov-4.8 when using gcc-4.8.
after_success:
  - curl -s https://codecov.io/bash | bash /dev/stdin -x gcov-4.8
